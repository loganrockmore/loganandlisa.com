<html>
	<head>
		<title>Vanlife Map</title>
		<link rel="apple-touch-icon" href="apple-touch-icon.png?modified=1" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="default" />
		
		<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css' rel='stylesheet' />
		
		<script src="jquery.min.js"></script>
		<script src='arcdata.js'></script>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<style>
			
			body {
				margin: 0px;
				padding: 0px;
				font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
			   font-weight: 300;
			}
			
			div#map {
				position: fixed;
				top: 0;
				bottom: 10;
				left: 0;
				right: 0;
			}
						
			div#map div.marker {
				width: 10px;
				height: 10px;
				border-radius: 5px;
				background-color: #990000;
			}
			
		</style>
	</head>
	<body>
		<div id="map"></div>
		
		<script>
			
			// create the map
			mapboxgl.accessToken = 'pk.eyJ1IjoibG9nYW5yb2NrbW9yZSIsImEiOiJjamR0N2Nmc2EwODlsMnhsMzhhZjdqc2hxIn0.2b8odx5yDsbWAgYpGjJysw';
			const map = new mapboxgl.Map({
			    container: 'map',
			    style: 'mapbox://styles/mapbox/light-v9'
			});
			
			map.on('style.load', () => {
				
				// get all layer bounds
				allLayerBounds = new mapboxgl.LngLatBounds();
				
				// add all of the tracks
				$.each(tracks, function(index, track){
					map.addLayer(track);
				});
				
				// add the waypoints
				$.each(waypoints, function(index, waypoint){
					map.addLayer(waypoint);
					
					const coordinates = waypoint.source.data.features[0].geometry.coordinates;
					allLayerBounds.extend(coordinates);
				});
				
				// fit the map to the waypoints
				map.fitBounds(allLayerBounds, {
					padding: 50,
				});
			});
			
		</script>
	</body>
</html>